import requests
import re

from requests import cookies

url='http://47.102.202.101:8080'#根据具体url进行更换

headers={#header头不用进行更换
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:90.0) Gecko/20100101 Firefox/90.0',
    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',
    'Accept-Language': 'zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2',
    'Accept-Encoding': 'gzip, deflate',
    'Connection': 'close',
    'Upgrade-Insecure-Requests': '1',
    'If-Modified-Since': 'Mon, 10 Aug 2020 17:10:05 GMT',
    'If-None-Match': '1599452886',
    'Cache-Control': 'max-age=0',
    'Authorization': 'Digest username=admin',
}
def req(url,headers):#发起http请求并返回cookies
    r=requests.get(url,headers=headers)
    return r.cookies
def getcok(cookie):#获取正则过滤后的session值
    pattern=re.compile('-http-session-=(.+) for')
    cookies=pattern.findall(cookie)
    return cookies

c1=str(req(url,headers))
c2=getcok(c1)
print(c2)#得到cooikes的session值拿到浏览器中使用即可越过密码验证访问页面